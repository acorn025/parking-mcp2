# 공공데이터포털 API 500 에러 분석 및 해결 방안

## 문제 상황

공공데이터포털 API 호출 시 **500 Internal Server Error** 발생
- 에러 메시지: "Unexpected errors"
- 모든 파라미터 조합에서 동일한 에러 발생

## 원인 분석

### 1. API 엔드포인트 URL 확인
- **현재 사용 중**: `http://apis.data.go.kr/B552895/ParkingInfoService/getParkingInfo`
- **문제점**: 서비스 코드 `B552895`가 실제로 존재하는지 확인 필요

### 2. 필수 파라미터 확인
현재 전송하는 파라미터:
- `serviceKey`: API 키 (32자)
- `pageNo`: 1
- `numOfRows`: 10
- `lat`: 위도
- `lng`: 경도
- `radius`: 반경 (미터)

**테스트 결과**: 파라미터 조합을 변경해도 동일한 500 에러 발생

### 3. API 키 형식 확인
- API 키 길이: 32자
- 형식: 일반적인 공공데이터포털 API 키 형식과 일치
- **문제 가능성**: API 키가 해당 서비스(B552895)에 대한 권한이 없을 수 있음

### 4. 실제 API 문서 확인 필요

공공데이터포털에서 제공하는 실제 주차장 정보 API를 확인해야 합니다:

1. **공공데이터포털 접속**: https://www.data.go.kr
2. **검색**: "주차장" 또는 "주차장 정보"
3. **API 선택**: 원하는 주차장 정보 API 선택
4. **서비스 코드 확인**: 해당 API의 실제 서비스 코드 확인
5. **엔드포인트 확인**: 실제 엔드포인트 경로 확인
6. **파라미터 확인**: 필수 파라미터 및 형식 확인

## 해결 방안

### 방안 1: 실제 API 확인 후 수정
1. 공공데이터포털에서 실제 주차장 정보 API 찾기
2. 서비스 코드 및 엔드포인트 확인
3. 코드 수정

### 방안 2: 대체 API 사용
- 카카오 로컬 API는 정상 작동 중
- 서울 열린데이터 API 사용 고려
- 경기데이터드림 API 사용 고려

### 방안 3: 에러 핸들링 개선
현재 코드에 상세한 에러 메시지 추가 완료:
- 500 에러 발생 시 가능한 원인 안내
- 사용자 친화적인 메시지 제공

## 현재 상태

- ✅ **카카오 로컬 API**: 정상 작동
- ✅ **서울 열린데이터 API**: 키 설정 완료 (테스트 필요)
- ✅ **경기데이터드림 API**: 키 설정 완료 (테스트 필요)
- ❌ **공공데이터포털 API**: 500 에러 (서비스 코드 확인 필요)

## 권장 사항

1. **즉시 사용 가능**: 카카오 로컬 API를 주로 사용
2. **추가 기능**: 서울/경기 실시간 정보는 해당 지역 API 사용
3. **공공데이터 API**: 실제 API 확인 후 수정

## 다음 단계

1. 공공데이터포털에서 실제 주차장 정보 API 확인
2. 서비스 코드 및 엔드포인트 수정
3. 또는 공공데이터 API 없이 카카오 + 서울/경기 API로 운영

